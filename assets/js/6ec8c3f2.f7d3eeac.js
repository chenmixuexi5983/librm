"use strict";(self.webpackChunklibrm_docs=self.webpackChunklibrm_docs||[]).push([[843],{4554:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"tutorials/gm6020","title":"GM6020 \u7535\u673a\u4f4d\u7f6e\u95ed\u73af\u63a7\u5236","description":"\u672c\u4f8b\u7a0b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 librm \u4e2d\u7684 GM6020 \u7535\u673a\u9a71\u52a8\u548c PID \u63a7\u5236\u5668\u5b9e\u73b0\u7535\u673a\u7f16\u7801\u5668\u4f4d\u7f6e\u95ed\u73af\u63a7\u5236\u3002","source":"@site/docs/tutorials/gm6020.mdx","sourceDirName":"tutorials","slug":"/tutorials/gm6020","permalink":"/docs/tutorials/gm6020","draft":false,"unlisted":false,"editUrl":"https://github.com/XDU-IRobot/librm/tree/main/docs/docs/tutorials/gm6020.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u7f16\u5199\u4e00\u4e2a CAN \u603b\u7ebf\u8bbe\u5907","permalink":"/docs/tutorials/can-device"},"next":{"title":"C \u677f\u59ff\u6001\u89e3\u7b97","permalink":"/docs/tutorials/imu-fusion"}}');var i=t(4848),s=t(8453);const o={},c="GM6020 \u7535\u673a\u4f4d\u7f6e\u95ed\u73af\u63a7\u5236",a={},l=[{value:"\u4ee3\u7801",id:"\u4ee3\u7801",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"gm6020-\u7535\u673a\u4f4d\u7f6e\u95ed\u73af\u63a7\u5236",children:"GM6020 \u7535\u673a\u4f4d\u7f6e\u95ed\u73af\u63a7\u5236"})}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u4f8b\u7a0b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 librm \u4e2d\u7684 GM6020 \u7535\u673a\u9a71\u52a8\u548c PID \u63a7\u5236\u5668\u5b9e\u73b0\u7535\u673a\u7f16\u7801\u5668\u4f4d\u7f6e\u95ed\u73af\u63a7\u5236\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u4ee3\u7801",children:"\u4ee3\u7801"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:'#include "can.h"\n#include "cmsis_os.h"\n#include "librm.hpp"\n\nusing rm::hal::Can;\nusing namespace rm::device;\nusing namespace rm::modules::algorithm;\n\nextern "C" {\n\nvoid ExampleGM6020Task(const void *pv_arg) {\n  Can can1(hcan1);\n  GM6020 gm6020(can1, 1);\n  RingPID<PIDType::kPosition> pid(5, 0, 0, 30000, 0, 8191);\n  can1.SetFilter(0, 0);\n  can1.Begin();\n\n  for (;;) {\n    pid.Update(3000, gm6020.encoder());  // \u66f4\u65b0PID\u63a7\u5236\u5668\u8f93\u51fa\n    gm6020.SetCurrent(static_cast<int16_t>(pid.value()));  // \u8bbe\u7f6e\u7535\u673a\u7535\u6d41\n    DjiMotor<>::SendCommand();                             // \u53d1\u9001\u63a7\u5236\u62a5\u6587\n    osDelay(1);\n  }\n}\n}\n'})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>c});var r=t(6540);const i={},s=r.createContext(i);function o(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);